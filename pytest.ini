# =============================================================================
# QuranBot - Pytest Configuration
# =============================================================================
# Pytest configuration for QuranBot test suite with markers,
# test discovery, and reporting settings.
# =============================================================================

[tool:pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers
markers =
    # Core functionality
    core: Core functionality tests
    config: Configuration management tests
    logging: Logging system tests
    errors: Error handling tests

    # Services
    services: Service layer tests
    audio: Audio service tests
    database: Database service tests
    state: State management tests
    metadata: Metadata cache tests

    # Bot functionality
    bot: Bot functionality tests
    commands: Command tests
    events: Event handling tests

    # UI Components
    control_panel: Control panel UI tests
    ui: User interface tests

    # Test types
    unit: Unit tests
    integration: Integration tests
    performance: Performance tests
    reliability: Reliability tests

    # Other
    slow: Slow running tests
    manual: Manual tests

# Test execution
addopts =
    --strict-markers
    --disable-warnings
    --tb=short
    --maxfail=10
    --durations=10

# Coverage settings (when using pytest-cov)
# addopts = --cov=app --cov-report=html --cov-report=term-missing

# Parallel execution (when using pytest-xdist)
# addopts = -n auto

# Output settings
minversion = 6.0
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning

# Test collection
collect_ignore =
    tests/__pycache__
    tests/.pytest_cache
    tests/conftest.py

# Async test settings
asyncio_mode = strict

# Timeout settings (when using pytest-asyncio)
# timeout = 30

# Verbose output
verbose = 1
